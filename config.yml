# åŸºæœ¬è®¾ç½®
port: 7890 # HTTPä»£ç†ç«¯å£
socks-port: 7891 # SOCKSä»£ç†ç«¯å£
allow-lan: false # å…è®¸å±€åŸŸç½‘è¿æ¥
bind-address: "*" # ç»‘å®šåœ°å€ï¼Œ* è¡¨ç¤ºæ‰€æœ‰åœ°å€
mode: rule # ä»£ç†æ¨¡å¼ï¼Œruleè¡¨ç¤ºè§„åˆ™æ¨¡å¼
log-level: info # æ—¥å¿—çº§åˆ«
# å¤–éƒ¨æ§åˆ¶é…ç½®
external-controller: 127.0.0.1:9090 # å…è®¸é€šè¿‡ RESTful API æˆ– Web ç•Œé¢ï¼ˆå¦‚ Clash Dashboardï¼‰åœ¨æœ¬åœ°æ§åˆ¶ Clash
#secret: jkfdjk43#$#@LI#@fsdf3  #å¤–éƒ¨æ§åˆ¶,apiè®¿é—®å¯†é’¥ï¼Œç¡®ä¿åªæœ‰çŸ¥é“å¯†ç çš„äººæ‰èƒ½æ§åˆ¶ Clash
# æ€§èƒ½ä¼˜åŒ–
unified-delay: true # æ›´æ¢å»¶è¿Ÿè®¡ç®—æ–¹å¼ï¼Œå»é™¤æ¡æ‰‹ç­‰é¢å¤–å»¶è¿Ÿ
tcp-concurrent: true # å¯ç”¨ TCP å¹¶å‘è¿æ¥ã€‚è¿™å…è®¸ Clash åŒæ—¶å»ºç«‹å¤šä¸ª TCP è¿æ¥ï¼Œå¯ä»¥æé«˜ç½‘ç»œæ€§èƒ½å’Œè¿æ¥é€Ÿåº¦

find-process-mode: strict # è®¾ç½®è¿›ç¨‹æŸ¥æ‰¾æ¨¡å¼ä¸ºä¸¥æ ¼æ¨¡å¼ï¼ŒClash ä¼šæ›´ç²¾ç¡®åœ°è¯†åˆ«å’ŒåŒ¹é…ç½‘ç»œæµé‡æ¥æºçš„è¿›ç¨‹
global-client-fingerprint: chrome # è®¾ç½®å…¨å±€å®¢æˆ·ç«¯æŒ‡çº¹ä¸º Chromeï¼Œä½¿ Clash åœ¨å»ºç«‹è¿æ¥æ—¶æ¨¡æ‹Ÿ Chrome æµè§ˆå™¨çš„ TLS æŒ‡çº¹ï¼Œå¢å¼ºéšç§æ€§å’Œç»•è¿‡æŸäº›ç½‘ç«™çš„æŒ‡çº¹æ£€æµ‹

# DNSé…ç½®
dns:
  enable: true # å¯ç”¨ Clash çš„ DNS åŠŸèƒ½
  ipv6: true # IPv6 DNS è§£æ
  enhanced-mode: fake-ip # è®¾ç½®å¢å¼ºæ¨¡å¼ä¸º fake-ip æ¨¡å¼ï¼Œæé«˜è§£æé€Ÿåº¦å’Œè¿æ¥æ€§èƒ½
  fake-ip-range: 198.18.0.1/16 # è®¾ç½® fake-ip çš„ IP åœ°å€èŒƒå›´ä¸º 198.18.0.1/16
  use-hosts: true # å¯ç”¨ hosts æ–‡ä»¶è§£æï¼ŒClash ä¼šæ£€æŸ¥ç³»ç»Ÿçš„ hosts æ–‡ä»¶
  use-system-hosts: true # ä½¿ç”¨ç³»ç»Ÿçš„ hosts æ–‡ä»¶è¿›è¡ŒåŸŸåè§£æ
  prefer-h3: true # å¦‚æœDNSæœåŠ¡å™¨æ”¯æŒDoH3ä¼šä¼˜å…ˆä½¿ç”¨h3ï¼Œæå‡æ€§èƒ½
  respect-rules: true # è®© DNS è§£æéµå¾ª Clash çš„è·¯ç”±è§„åˆ™
  # å®šä¹‰ä¸ä½¿ç”¨è™šå‡IPè§£æçš„åŸŸååˆ—è¡¨
  fake-ip-filter:
    - "*.lan"
    - localhost.ptlogin2.qq.com
    - "+.srv.nintendo.net"
    - "+.stun.playstation.net"
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    - "+.xboxlive.com"
    - "xbox.*.microsoft.com"
    - "*.battlenet.com.cn"
    - "*.battlenet.com"
    - "*.blzstatic.cn"
    - "*.battle.net"

  # å»ºè®®å¤šå†™ç‚¹ DNS ï¼ˆ clash çš„æœºåˆ¶æ˜¯åŒæ—¶å‘æ‰€æœ‰ DNS å‘èµ·è§£æè¯·æ±‚ï¼Œç”¨è¿”å›æœ€å¿«é‚£ä¸ªï¼Œåç»­çš„ç›´æ¥ä¸¢å¼ƒï¼‰
  # ç”¨æ¥è§£æ nameserver å’Œ fallback é‡Œé¢çš„åŸŸåçš„ï¼Œå¿…é¡»ä¸º IP, å¯ä¸ºåŠ å¯† DNS
  default-nameserver:
    - 8.8.8.8 # Google DNS
    - 1.1.1.1 # Cloudflare DNS
    - 119.29.29.29 # è…¾è®¯DNSPod
    - 223.5.5.5 # é˜¿é‡ŒDNS
    - 223.6.6.6 # é˜¿é‡ŒDNS
    - 180.76.76.76 # ç™¾åº¦DNS

  # ç”¨äºdirectå‡ºå£åŸŸåè§£æçš„ DNS æœåŠ¡å™¨
  # å¦‚æœä¸å¡«åˆ™éµå¾ªnameserver-policyã€nameserverå’Œfallbackçš„é…ç½®
  direct-nameserver:
    - system
    - https://doh.pub/dns-query #è…¾è®¯
    - https://dns.alidns.com/dns-query #é˜¿é‡Œ
    - 114.114.114.114 # 114
    - 114.114.115.115 # 114
    - 101.226.4.6 # ç™¾åº¦-ç”µä¿¡
    - 123.125.81.6 # ç™¾åº¦-è”é€š
    - 180.76.76.76 # ç™¾åº¦-è”é€š
    - 112.124.47.27 # OneDNS-å—æ–¹
    - 114.215.126.16 # OneDNS-åŒ—æ–¹
  nameserver:
    - https://8.8.8.8/dns-query#ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    - https://1.1.1.1/dns-query#ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  # è§£æä»£ç†æœåŠ¡å™¨åŸŸåçš„DNSæœåŠ¡å™¨,å°±æ˜¯èŠ‚ç‚¹æœ¬èº«ä¸­åŒ…å«çš„åŸŸå
  # ä»£ç†èŠ‚ç‚¹åŸŸåè§£ææœåŠ¡å™¨ï¼Œä»…ç”¨äºè§£æä»£ç†èŠ‚ç‚¹çš„åŸŸåï¼Œå¦‚æœä¸å¡«åˆ™éµå¾ªnameserver-policyã€nameserverå’Œfallbackçš„é…ç½®
  proxy-server-nameserver:
    - https://1.1.1.1/dns-query # Cloudflare DNS
    - https://8.8.8.8/dns-query # Google DNS
    - https://doh.pub/dns-query #è…¾è®¯
    - https://dns.alidns.com/dns-query #é˜¿é‡Œ
    - https://9.9.9.9/dns-query #Quad9
    - https://208.67.222.222/dns-query #OpenDNS

# é…ç½®æ–‡ä»¶ç®¡ç†
profile:
  store-selected: true # ä¿å­˜ç”¨æˆ·é€‰æ‹©çš„ä»£ç†é…ç½®ï¼Œåœ¨ Clash é‡å¯åä»ç„¶è®°ä½ä¸Šæ¬¡é€‰æ‹©çš„ä»£ç†æœåŠ¡å™¨
  store-fake-ip: true # é€‚ç”¨äº Clash åœ¨ Fake IP æ¨¡å¼ä¸‹å·¥ä½œæ—¶ã€‚å®ƒä¼šå°†åŸŸååˆ° Fake IP çš„æ˜ å°„å…³ç³»ä¿å­˜ä¸‹æ¥ï¼Œç¡®ä¿ Clash é‡å¯åä¾ç„¶èƒ½ä½¿ç”¨ç›¸åŒçš„ Fake IP åˆ†é…ç»™ç›¸åŒçš„åŸŸåï¼Œä¿æŒè¿æ¥çš„ä¸€è‡´æ€§å’Œç¨³å®šæ€§

# åŸŸåå—…æ¢
sniffer:
  enable: true # å¯ç”¨ç½‘ç»œæµé‡å—…æ¢åŠŸèƒ½ï¼Œå…è®¸ Clash åˆ†æå’Œè¯†åˆ«æµé‡ç±»å‹
  sniff:
    TLS:
      ports: [443, 8443] # è¦å—…æ¢çš„ TLS æµé‡ç«¯å£ï¼ŒåŒ…æ‹¬æ ‡å‡† HTTPS ç«¯å£ 443 å’Œå¸¸ç”¨çš„å¤‡ç”¨ HTTPS ç«¯å£ 8443
    HTTP:
      ports: [80, 8080-8880] # è¦å—…æ¢çš„ HTTP æµé‡ç«¯å£ï¼ŒåŒ…æ‹¬æ ‡å‡† HTTP ç«¯å£ 80 å’Œå¸¸ç”¨çš„ HTTP ç«¯å£èŒƒå›´ 8080-8880
      override-destination: true # å¯ç”¨ç›®æ ‡è¦†ç›–åŠŸèƒ½ï¼Œå…è®¸ Clash æ ¹æ®å—…æ¢åˆ°çš„åŸŸåé‡å†™è¯·æ±‚çš„ç›®æ ‡åœ°å€

# GeoData é…ç½®
geodata-mode: true # å¯ç”¨åœ°ç†æ•°æ®æ¨¡å¼ï¼Œä½¿ Clash ä½¿ç”¨ GeoIP/GeoSite æ•°æ®åº“è¿›è¡Œæµé‡çš„åœ°ç†ä½ç½®è¯†åˆ«å’Œè§„åˆ™åŒ¹é…
geo-auto-update: true # å¯ç”¨åœ°ç†æ•°æ®åº“è‡ªåŠ¨æ›´æ–°åŠŸèƒ½ï¼ŒClash ä¼šå®šæœŸæ£€æŸ¥å¹¶æ›´æ–° GeoIP/GeoSite æ•°æ®åº“
geo-update-interval: 24 # è®¾ç½®åœ°ç†æ•°æ®åº“çš„æ›´æ–°é—´éš”ä¸º24å°æ—¶ï¼ŒClash ä¼šæ¯24å°æ—¶è‡ªåŠ¨æ£€æŸ¥ä¸€æ¬¡æ›´æ–°ï¼ˆå°æ—¶ï¼‰
geodata-loader: standard # è®¾ç½®åœ°ç†æ•°æ®åŠ è½½å™¨ä¸ºæ ‡å‡†æ¨¡å¼ï¼Œä½¿ç”¨æ ‡å‡†çš„æ•°æ®è§£æå’ŒåŠ è½½æ–¹å¼å¤„ç†åœ°ç†æ•°æ®åº“
# GeoDataä¸‹è½½æºï¼ˆä½¿ç”¨å›½å†…åŠ é€Ÿä¸‹è½½æºï¼‰
# å¤‡ç”¨ä¸‹è½½åŸŸåhttps://ghfast.topã€https://ghproxy.netã€https://ghgo.xyz
geox-url:
  geoip: https://fastgh.lainbo.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat
  geosite: https://fastgh.lainbo.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat
  mmdb: https://fastgh.lainbo.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country-lite.mmdb
  asn: https://fastgh.lainbo.com/https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb

# https://github.com/Loyalsoldier/clash-rules
rule-providers:
  reject:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt"
    path: ./ruleset/reject.yaml
    interval: 86400

  icloud:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt"
    path: ./ruleset/icloud.yaml
    interval: 86400

  apple:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt"
    path: ./ruleset/apple.yaml
    interval: 86400

  google:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt"
    path: ./ruleset/google.yaml
    interval: 86400

  proxy:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
    path: ./ruleset/proxy.yaml
    interval: 86400

  direct:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt"
    path: ./ruleset/direct.yaml
    interval: 86400

  private:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt"
    path: ./ruleset/private.yaml
    interval: 86400

  gfw:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt"
    path: ./ruleset/gfw.yaml
    interval: 86400

  tld-not-cn:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt"
    path: ./ruleset/tld-not-cn.yaml
    interval: 86400

  telegramcidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt"
    path: ./ruleset/telegramcidr.yaml
    interval: 86400

  cncidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt"
    path: ./ruleset/cncidr.yaml
    interval: 86400

  lancidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt"
    path: ./ruleset/lancidr.yaml
    interval: 86400

  applications:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt"
    path: ./ruleset/applications.yaml
    interval: 86400

rules:
  - RULE-SET,applications,DIRECT
  - DOMAIN,clash.razord.top,DIRECT
  - DOMAIN,yacd.haishan.me,DIRECT
  - RULE-SET,private,DIRECT
  - RULE-SET,reject,REJECT
  - RULE-SET,icloud,DIRECT
  - RULE-SET,apple,DIRECT
  - RULE-SET,google,PROXY
  - RULE-SET,proxy,PROXY
  - RULE-SET,direct,DIRECT
  - RULE-SET,lancidr,DIRECT
  - RULE-SET,cncidr,DIRECT
  - RULE-SET,telegramcidr,PROXY
  - GEOIP,LAN,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,PROXY
